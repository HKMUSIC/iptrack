<!DOCTYPE html>
<html>
<head>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <title>Vote Verification</title>
</head>
<body style="background: #000; color: #fff; text-align: center; font-family: sans-serif; padding-top: 50px;">
    <h3>Verifying Your Device...</h3>
    <p>Please wait a moment.</p>

    <script>
        const tele = window.Telegram.WebApp;
        tele.ready();

        // IP Address fetch karne ke liye free API ka use
        fetch('https://api.ipify.org?format=json')
            .then(response => response.json())
            .then(data => {
                const userIp = data.ip;
                const urlParams = new URLSearchParams(window.location.search);
                const entryId = urlParams.get('id');

                // Bot ko data wapis bhejna (format: entry_id|ip)
                tele.sendData(entryId + "|" + userIp);
                tele.close(); // Data bhejte hi window band ho jayegi
            })
            .catch(err => {
                alert("Verification Failed. Try again.");
                tele.close();
            });
    </script>
</body>
</html>
